# –ú–æ–¥—É–ª–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –¥–∞—Ç–∞—Å–µ—Ç–∞

–≠—Ç–æ—Ç –ø–∞–∫–µ—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –º–æ–¥—É–ª–∏ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –¥–∞—Ç–∞—Å–µ—Ç–∞ –∞–Ω–æ–Ω–∏–º–∏–∑–∞—Ü–∏–∏ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ OpenAI API.

## –ú–æ–¥—É–ª–∏

- **`dataset_config.py`** - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏, —Å–ª—É—á–∞–π–Ω–æ–µ —Å–µ–º–ø–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- **`dataset_prompts.py`** - –®–∞–±–ª–æ–Ω—ã –ø—Ä–æ–º–ø—Ç–æ–≤ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å—Ñ–µ—Ä –∏ —Ä–µ–≥–∏–æ–Ω–æ–≤
- **`dataset_openai_generator.py`** - –û—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞ —á–µ—Ä–µ–∑ OpenAI API

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

–û—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

```bash
python generate_dataset.py --help
```

–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –º–æ–¥—É–ª–µ–π:

```bash
cd tests
python test_dataset_generator.py 
```

# –°–∫—Ä–∏–ø—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∞—Ç–∞—Å–µ—Ç–∞–º–∏

–î–∞–Ω–Ω–∞—è –ø–∞–ø–∫–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏ —Ä–∞–∑–º–µ—Ç–∫–∏ –¥–∞—Ç–∞—Å–µ—Ç–æ–≤ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.

## –°–∫—Ä–∏–ø—Ç—ã

### 1. `split_dataset.py` - –†–∞–∑–±–∏–µ–Ω–∏–µ –¥–∞—Ç–∞—Å–µ—Ç–∞

–†–∞–∑–±–∏–≤–∞–µ—Ç –±–æ–ª—å—à–æ–π –¥–∞—Ç–∞—Å–µ—Ç –Ω–∞ –ø–æ–¥–¥–∞—Ç–∞—Å–µ—Ç—ã –ø–æ –∑–∞–¥–∞–Ω–Ω–æ–º—É –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –¥–∏–∞–ª–æ–≥–æ–≤.

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```bash
python scripts/split_dataset.py data/generated/dataset.json --dialogs_per_subset 50
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `input_file` - –ø—É—Ç—å –∫ –∏—Å—Ö–æ–¥–Ω–æ–º—É —Ñ–∞–π–ª—É –¥–∞—Ç–∞—Å–µ—Ç–∞
- `--dialogs_per_subset` / `-d` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–∏–∞–ª–æ–≥–æ–≤ –≤ –∫–∞–∂–¥–æ–º –ø–æ–¥–¥–∞—Ç–∞—Å–µ—Ç–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 50)

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –°–æ–∑–¥–∞–µ—Ç —Ñ–∞–π–ª—ã `dataset.1.json`, `dataset.2.json`, –∏ —Ç.–¥.
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –æ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–º –¥–∞—Ç–∞—Å–µ—Ç–µ

### 2. `annotate_dataset.py` - –°—É–ø–µ—Ä-—É–º–Ω–∞—è —Ä–∞–∑–º–µ—Ç–∫–∞

–í—ã—Å–æ–∫–æ–∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Ä–∞–∑–º–µ—Ç–∫–∏ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —Å —É–º–Ω–æ–π —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –ª–æ–∂–Ω—ã—Ö —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π.

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```bash
python scripts/annotate_dataset.py
```

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- üéØ **–í—ã—Å–æ–∫–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å** - —É–º–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π
- üö´ **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ª–æ–∂–Ω—ã—Ö —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π** - –∏—Å–∫–ª—é—á–∞–µ—Ç –Ω–æ–º–µ—Ä–∞ –∑–∞–∫–∞–∑–æ–≤, –æ–±—ã—á–Ω—ã–µ —Ñ—Ä–∞–∑—ã
- üìä **–ü–æ–¥—Ä–æ–±–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ —Ç–∏–ø–∞–º —Å—É—â–Ω–æ—Å—Ç–µ–π
- üîç **–†–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ** - –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ç–∏–ø—ã –ü–î
- ‚ö° **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫** - –Ω–∞—Ö–æ–¥–∏—Ç –≤—Å–µ –ø–æ–¥–¥–∞—Ç–∞—Å–µ—Ç—ã –≤ –ø–∞–ø–∫–µ
- üíæ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–µ —Ñ–∞–π–ª—ã, –Ω–µ –∏–∑–º–µ–Ω—è—è –∏—Å—Ö–æ–¥–Ω—ã–µ

## –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ç–∏–ø—ã –ü–î

| –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä—ã |
|-----|----------|---------|
| PHONE | –¢–µ–ª–µ—Ñ–æ–Ω–Ω—ã–µ –Ω–æ–º–µ—Ä–∞ | +7 916 123 45 67, 8 903 123 45 67 |
| EMAIL | –≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è –ø–æ—á—Ç–∞ | user@example.com |
| PASSPORT | –ü–∞—Å–ø–æ—Ä—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ | —Å–µ—Ä–∏—è 1234 –Ω–æ–º–µ—Ä 567890 |
| DRIVER_LICENSE | –í–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–µ –ø—Ä–∞–≤–∞ | 12–ê–í123456 |
| CARD_NUMBER | –ù–æ–º–µ—Ä–∞ –±–∞–Ω–∫–æ–≤—Å–∫–∏—Ö –∫–∞—Ä—Ç | 1234 5678 9012 3456 |
| SNILS | –°–ù–ò–õ–° | 123-456-789 12 |
| INN | –ò–ù–ù | 1234567890 |
| VIN | VIN –Ω–æ–º–µ—Ä –∞–≤—Ç–æ–º–æ–±–∏–ª—è | XW8ZZZ4C9DW123456 |
| ADDRESS | –ê–¥—Ä–µ—Å–∞ | –≥. –ú–æ—Å–∫–≤–∞, —É–ª. –¢–≤–µ—Ä—Å–∫–∞—è, –¥. 1 |
| FULL_NAME | –ü–æ–ª–Ω—ã–µ –∏–º–µ–Ω–∞ | (—Ç–æ–ª—å–∫–æ —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º) |

## –£–º–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è

–°–∫—Ä–∏–ø—Ç –ø—Ä–∏–º–µ–Ω—è–µ—Ç –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—É—é —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é:

- ‚úÖ **–¢–µ–ª–µ—Ñ–æ–Ω—ã**: –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–ª–∏–Ω—É (10-11 —Ü–∏—Ñ—Ä), –∏—Å–∫–ª—é—á–∞–µ—Ç –Ω–æ–º–µ—Ä–∞ –∑–∞–∫–∞–∑–æ–≤
- ‚úÖ **Email**: –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç —Ñ–æ—Ä–º–∞—Ç (–Ω–∞–ª–∏—á–∏–µ @ –∏ –¥–æ–º–µ–Ω–∞)
- ‚úÖ **–ë–∞–Ω–∫–æ–≤—Å–∫–∏–µ –∫–∞—Ä—Ç—ã**: –ø—Ä–æ–≤–µ—Ä—è–µ—Ç 16 —Ü–∏—Ñ—Ä, –∏—Å–∫–ª—é—á–∞–µ—Ç –Ω–æ–º–µ—Ä–∞ –∑–∞–∫–∞–∑–æ–≤
- ‚úÖ **–°–ù–ò–õ–°**: —Å—Ç—Ä–æ–≥–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞ XXX-XXX-XXX XX
- ‚úÖ **VIN**: –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ä–æ–≤–Ω–æ 17 —Å–∏–º–≤–æ–ª–æ–≤
- ‚úÖ **–ò–º–µ–Ω–∞**: –∏—Å–∫–ª—é—á–∞–µ—Ç –æ–±—ã—á–Ω—ã–µ —Ñ—Ä–∞–∑—ã ("–¥–æ–±—Ä—ã–π –¥–µ–Ω—å", "–≤—Å–µ –≤–µ—Ä–Ω–æ")

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤—ã—Ö–æ–¥–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

–†–∞–∑–º–µ—á–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã —Å–æ–¥–µ—Ä–∂–∞—Ç:

```json
{
  "metadata": {
    "total_dialogs": 50,
    "annotation_version": "smart_v3.0",
    "annotation_stats": {
      "dialogs_with_pd": 15,
      "pd_percentage": 30.0,
      "total_entities_found": 25,
      "entity_types_distribution": {
        "PHONE": 8,
        "EMAIL": 5,
        "PASSPORT": 2
      }
    }
  },
  "dialogs": [
    {
      "text": "–ú–æ–π —Ç–µ–ª–µ—Ñ–æ–Ω +7 916 123 45 67",
      "entities": [
        {
          "start": 12,
          "end": 28,
          "type": "PHONE",
          "text": "+7 916 123 45 67"
        }
      ],
      "has_pd": true,
      "description": "...",
      "id": 1
    }
  ]
}
```

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

1. **–†–∞–∑–±–µ–π—Ç–µ –±–æ–ª—å—à–æ–π –¥–∞—Ç–∞—Å–µ—Ç** (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ):
   ```bash
   python scripts/split_dataset.py data/generated/big_dataset.json -d 50
   ```

2. **–í—ã–ø–æ–ª–Ω–∏—Ç–µ —Ä–∞–∑–º–µ—Ç–∫—É**:
   ```bash
   python scripts/annotate_dataset.py
   ```

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã** –≤ —Ñ–∞–π–ª–∞—Ö `*_annotated.json`

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- üîÑ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫** - –Ω–∞—Ö–æ–¥–∏—Ç –≤—Å–µ —Ñ–∞–π–ª—ã `llama-4-maverick-4.*.json`
- üõ°Ô∏è **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - –∏—Å–∫–ª—é—á–∞–µ—Ç —É–∂–µ —Ä–∞–∑–º–µ—á–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- üìà **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** - –ø–æ–¥—Ä–æ–±–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –ø–æ –∫–∞–∂–¥–æ–º—É –ø–æ–¥–¥–∞—Ç–∞—Å–µ—Ç—É
- üé® **–£–¥–æ–±–Ω—ã–π –≤—ã–≤–æ–¥** - —ç–º–æ–¥–∑–∏ –∏ —Ü–≤–µ—Ç–Ω–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞